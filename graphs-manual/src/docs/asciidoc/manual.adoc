:toc:
:sourcedir: ../../../src/test/java

= Graph Topics

== Usage

`Graphs` is made up of a few modules published to maven central.

`graphs-core` contains the main classes

----
compile group: 'com.github.moaxcp.graphs', name: 'graphs-core', version: '0.8.0'
----

`graphs-greenrobot` EventGraph implementation using greenrobot's EventBus

----
compile group: 'com.github.moaxcp.graphs', name: 'graphs-greenrobot', version: '0.8.0'
----

`graphs-graphviz` rendering for graphviz

----
compile group: 'com.github.moaxcp.graphs', name: 'graphs-graphviz', version: '0.8.0'
----

`graphs-truth` assertions using google-truth

----
compile group: 'com.github.moaxcp.graphs', name: 'graphs-truth', version: '0.8.0'
----


== What is a graph

A graph is a data structure containing a set of vertices and a set of edges. A vertex is typically a value and an edge
is a relationship between two vertices (or values). The relationship (or edge) may be directional. The `Graph`
interface in this library follows these concepts. Values are represented as properties of a `Graph`, `Vertex`, or
`Edge`. Some properties are required some are optional.

=== properties

Vertices must have an `id` property which is be unique to all vertices in the `Graph`.

Edges must have a `from` value which represents the `Vertex` the `Edge` connects from (or
source vertex) and a `to` value which represents the `Vertex` the `Edge` connects to (the target vertex). Edges may
have an optional `id` value.

Graphs may have an optional `id`.

In addition,
vertices and edges can have other values associated to them. These extra properties can be used to represent other
values. For instance, if the graph needs to be represented in graphviz there can be properties for color and style.

Graphs may also have properties associated to them. The `Graph`
interface represents a property graph.

=== inherited properties

Vertices and edges in a graph can inherit properties from common vertex properties and edge properties setup in the
graph.

== Representing a graph as code

The `Graph` interface defines methods for building a graph as well as inner classes `Vertex` and `Edge`. These Inner
classes provide a perspective of the graph from those elements. Edges can change their endpoints, navigate to an
endpoint and modify properties. Vertices can add new edges, get in, out, and adjacent edges, and modify properties.

There are two implementations of `Graph`.

[source,java,indent=0]
----
var undirectedGraph = new UndirectedGraph<String>();
var directedGraph = new DirectedGraph<String>();
----

== Create a graph using edge methods

A graph can be constructed by calling edge methods. The vertices declared in the calls are implicitly created.


[source,java,indent=0]
----
include::{sourcedir}/com/github/moaxcp/graphs/manual/EdgeMethods.java[tags=edge]
----

Edge methods will create vertices and can also add properties to the edge.

The properties can be anything but here they are used for graphviz.


[source,java,indent=0]
----
include::{sourcedir}/com/github/moaxcp/graphs/manual/EdgeMethods.java[tags=dot]
----

image::images/edgeMethods.png[edge classification]

`edge` methods return the graph and can be chained to add multiple edges. If an `Edge` instance is needed use `getEdge`
instead. `getEdge` return the Edge so it can modified. This allows properties to be added, removed, or updated
including the "to" and "from" vertices of the edge. `getEdge` can also be used to declare properties on the edge.

[source,java,indent=0]
----
include::{sourcedir}/com/github/moaxcp/graphs/manual/EdgeMethods.java[tags=getEdge]
----

The previous example used a `DirectedGraph`. In a directed graph two edges can be between two vertices as is shown
between vertex `A` and `B`. The must go in opposite directions. If the graph were an instance of `UndirectedGraph`,
there would only be one edge between vertex `A` and `B`.

----
graph.getEdge("A", "B");
graph.getEdge("B", "A");
----

In an `UndirectedGraph` both calls to `getEdge` returns the same edge instance. The first call creates the edge.

== Create a graph using vertex methods

A graph can be constructed by calling `getVertex` methods. A Vertex will be returned which can then be connected to
other vertices using `connectsTo` or `connectsFrom`.

[source,java,indent=0]
----
include::{sourcedir}/com/github/moaxcp/graphs/manual/VertexMethods.java[tag=getVertex]
----

image::images/getVertexMethods.png[]

== Visualize a graph with graphviz

Graphs can be visualized using the `graphs-graphviz` module. The module converts a graph to the `dot` language or an
image. Example:

[source,java,indent=0]
----
include::{sourcedir}/com/github/moaxcp/graphs/manual/EdgeMethods.java[tags=dot]
----

image::images/edgeMethods.png[edge classification]

== pre-order iterator and pre-order stream

And iterator and stream are provided to perform pre-order depth first traversals.

